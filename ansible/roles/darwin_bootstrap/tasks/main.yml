---

- name: Install Homebrew casks
  homebrew_cask:
    name: "{{ item }}"
    state: latest
    update_homebrew: yes
  with_items: "{{ homebrew_casks }}"

- name: Install Homebrew packges
  homebrew:
    name: "{{ item }}"
    state: latest
    update_homebrew: yes
  with_items: "{{ homebrew_packages }}"

- name: Install pip packages
  pip:
    name: "{{ item }}"
    state: latest
    executable: "{{ pip.executable }}"
  become: True
  with_items: "{{ pip.packages }}"

- name: Remove apps from Dock
  shell: dockutil --remove "{{ item }}"
  ignore_errors: true
  with_items: "{{ dockitems_to_remove }}"

- name: Add apps to Dock
  shell: dockutil --find "{{ item.name }}" || dockutil --add "{{ item.path }}"
  with_items: "{{ dockitems_to_persist }}"

- name: Rearrange Dock
  shell: dockutil --move "{{ item.name }}" --position "{{ item.pos }}"
  with_items: "{{ dockitems_to_persist }}"
